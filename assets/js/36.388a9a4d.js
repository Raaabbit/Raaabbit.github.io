(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{462:function(t,a,s){"use strict";s.r(a);var n=s(25),e=Object(n.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"为什么在head中引入css"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#为什么在head中引入css"}},[t._v("#")]),t._v(" 为什么在head中引入CSS")]),t._v(" "),s("blockquote",[s("p",[t._v("写在前面：有很长一段时间没有更新这个专栏，是因为在准备一些课程上的东西，不过这个专栏一定不会烂尾的~")])]),t._v(" "),s("p",[t._v("写这篇文章的原因是因为从我初学前端开始，就一直有人告诉我：“样式表文件在"),s("code",[t._v("head")]),t._v("中通过"),s("code",[t._v("link")]),t._v("引入，"),s("code",[t._v("script")]),t._v("文件在"),s("code",[t._v("body")]),t._v("的末尾引入，这样页面加载速度更快。”那么着一切究竟是为什么呢，下面我们来看一下~")]),t._v(" "),s("p",[t._v("（如果真的不想看这些铺垫内容，不妨直接跳到最后的总结，嘤嘤嘤~）")]),t._v(" "),s("h2",{attrs:{id:"曾经的错误尝试"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#曾经的错误尝试"}},[t._v("#")]),t._v(" 曾经的错误尝试")]),t._v(" "),s("p",[t._v("下面这个例子摘自《高性能网站建设指南》第五章开头：\nYahoo！前端团队曾经为了优化门户网站的性能，调整了CSS的位置——由于一个div是在点击某个功能时才会弹出，所以工程师将与这个div有关的CSS在文档的末尾引入，希望以这种方式提高首页的渲染效率。\n但是事实上，状况并不理想，甚至恰恰相反——将CSS在文档head引入反而更快。")]),t._v(" "),s("h2",{attrs:{id:"错误原因：逐步呈现被阻止"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#错误原因：逐步呈现被阻止"}},[t._v("#")]),t._v(" 错误原因：逐步呈现被阻止")]),t._v(" "),s("h3",{attrs:{id:"逐步呈现"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#逐步呈现"}},[t._v("#")]),t._v(" 逐步呈现")]),t._v(" "),s("p",[t._v("我们都希望页面的呈现过程是一个逐步呈现的过程，理想的效果是用户能够尽快看到页面上的内容，同时内容可以呈现一个柔滑的增加，毕竟不是所有的用户都有非常良好的网络环境。这样做有几个好处：")]),t._v(" "),s("ul",[s("li",[t._v("让用户感受到系统并没有崩溃，它正在有条不紊的运作")]),t._v(" "),s("li",[t._v("让用户知道自己大概还需等待多长时间")]),t._v(" "),s("li",[t._v("让用户对页面内容有一个概览，同时有内容可以看")])]),t._v(" "),s("p",[t._v("注：上面列出的三点是由 Jakob Nielson 提出的可视化回馈的重要性")]),t._v(" "),s("h3",{attrs:{id:"错误"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#错误"}},[t._v("#")]),t._v(" 错误")]),t._v(" "),s("p",[t._v("为了增强用户体验，浏览器也采用了这样的方式来处理一个页面。\n但是，为了避免当样式表改变时重绘页面中的内容，浏览器会在样式表加载好之前阻止内容呈现。所以将样式表放在文档底部，页面上的内容虽然很快"),s("strong",[t._v("加载")]),t._v("好了，但是浏览器会延迟"),s("strong",[t._v("可视化渲染")]),t._v("，这还造成了一个很可怕的现象——白屏。")]),t._v(" "),s("h2",{attrs:{id:"解决方法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#解决方法"}},[t._v("#")]),t._v(" 解决方法")]),t._v(" "),s("p",[t._v("解决上面提到的问题其实很简单，只要将CSS以下面的方式引入：")]),t._v(" "),s("div",{staticClass:"language-html line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-html"}},[s("code",[s("span",{pre:!0,attrs:{class:"token doctype"}},[t._v("<!DOCTYPE html>")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("html")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("head")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("meta")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("charset")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("utf-8"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("title")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("嘤嘤嘤？"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("title")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("link")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("rel")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("stylesheet"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("type")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("text/css"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("href")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("mystyle.css"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("head")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("body")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    \n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("body")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("html")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br")])]),s("p",[t._v("这时又有一个问题产生了，引入CSS有两种方法："),s("code",[t._v("link")]),t._v("和"),s("code",[t._v("@improt")]),t._v("。我们要为什么一般使用"),s("code",[t._v("link")]),t._v("呢？"),s("br"),t._v("\n除了语法更简单，"),s("code",[t._v("link")]),t._v("比"),s("code",[t._v("@import")]),t._v("的性能好很多，因为"),s("code",[t._v("@import")]),t._v("仍然没有解决白屏问题。\n使用"),s("code",[t._v("@import")]),t._v("会导致下载的无序性，我们的样式表仍然会在最后被下载。")]),t._v(" "),s("h2",{attrs:{id:"浏览器为什么这么做"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#浏览器为什么这么做"}},[t._v("#")]),t._v(" 浏览器为什么这么做")]),t._v(" "),s("blockquote",[s("p",[t._v("如果样式表仍然在加载，构建呈现树就是一种性能浪费，因为在所有样式表加载并解析完毕之前无需绘制任何东西。否则我们将会遇到FOUC（无样式内容闪烁）问题。")])]),t._v(" "),s("p",[t._v("浏览器构建页面的顺序我在之前的文章中写到过，戳戳->"),s("a",{attrs:{href:"https://blog.csdn.net/github_39457740/article/details/80697345",target:"_blank",rel:"noopener noreferrer"}},[t._v("前端性能优化第二篇"),s("OutboundLink")],1)]),t._v(" "),s("p",[t._v("如果浏览器不做任何操作的话，我们将CSS放在文档后面会导致FOUC问题，具体表现为页面最初呈现一个样式，在短暂的几秒后，样式表加载好，页面布局突然发生了变化。")]),t._v(" "),s("p",[t._v("而白屏现象则是浏览器对闪烁的弥补措施，避免额外的呈现过程，浏览器得以延迟呈现这个页面。")]),t._v(" "),s("h2",{attrs:{id:"总结"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[t._v("#")]),t._v(" 总结")]),t._v(" "),s("ol",[s("li",[t._v("我们应当遵守规范，使用"),s("strong",[t._v("LINK")]),t._v("标签，将样式表文件添加到"),s("strong",[t._v("HEAD")]),t._v("中")]),t._v(" "),s("li",[t._v("如果我们将样式表放到文档的底部或者使用"),s("code",[t._v("@import")]),t._v("可能会导致“白屏”或者“无样式内容闪烁”，具体会发生什么取决于浏览器的策略。")])])])}),[],!1,null,null,null);a.default=e.exports}}]);